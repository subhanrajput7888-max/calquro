document.addEventListener('DOMContentLoaded',function(){initializeNavigation();initializeAnimations();initializeScrollEffects();initializeForms();initializeReviews();if(document.getElementById('chatbot-container')){initializeChatbot()}initializeLazyLoading();preloadCriticalResources()});function initializeNavigation(){const navToggle=document.querySelector('.nav-toggle');const navMenu=document.querySelector('.nav-menu');const navLinks=document.querySelectorAll('.nav-link');const header=document.querySelector('.header');if(navToggle&&navMenu){navToggle.addEventListener('click',function(){navToggle.classList.toggle('active');navMenu.classList.toggle('active');if(navMenu.classList.contains('active')){document.body.style.overflow='hidden'}else{document.body.style.overflow='auto'}});navLinks.forEach(link=>{link.addEventListener('click',function(){navToggle.classList.remove('active');navMenu.classList.remove('active');document.body.style.overflow='auto'})});document.addEventListener('click',function(e){if(!navToggle.contains(e.target)&&!navMenu.contains(e.target)){navToggle.classList.remove('active');navMenu.classList.remove('active');document.body.style.overflow='auto'}});document.addEventListener('keydown',function(e){if(e.key==='Escape'&&navMenu.classList.contains('active')){navToggle.classList.remove('active');navMenu.classList.remove('active');document.body.style.overflow='auto'}});window.addEventListener('resize',function(){if(window.innerWidth>768){navToggle.classList.remove('active');navMenu.classList.remove('active');document.body.style.overflow='auto'}})}if(header){window.addEventListener('scroll',function(){if(window.scrollY>100){header.style.background='rgba(255, 255, 255, 0.98)';header.style.boxShadow='0 4px 6px -1px rgba(0, 0, 0, 0.1)'}else{header.style.background='rgba(255, 255, 255, 0.95)';header.style.boxShadow='0 1px 3px 0 rgba(0, 0, 0, 0.1)'}})}document.querySelectorAll('a[href^=\"#\"]').forEach(anchor=>{anchor.addEventListener('click',function(e){e.preventDefault();const target=document.querySelector(this.getAttribute('href'));if(target){target.scrollIntoView({behavior:'smooth',block:'start'})}})})}function initializeAnimations(){const observerOptions={threshold:0.1,rootMargin:'0px 0px -50px 0px'};const observer=new IntersectionObserver(function(entries){entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('animated')}})},observerOptions);document.querySelectorAll('.animate-on-scroll').forEach(el=>{observer.observe(el)})}function initializeScrollEffects(){let ticking=false;function updateScrollEffects(){const scrolled=window.pageYOffset;const parallaxElements=document.querySelectorAll('.parallax');parallaxElements.forEach(element=>{const speed=element.dataset.speed||0.5;element.style.transform=`translateY(${scrolled*speed}px)`});ticking=false}window.addEventListener('scroll',function(){if(!ticking){requestAnimationFrame(updateScrollEffects);ticking=true}})}function initializeForms(){const contactForm=document.getElementById('contact-form');if(contactForm){contactForm.addEventListener('submit',function(e){e.preventDefault();const formData=new FormData(contactForm);const data=Object.fromEntries(formData);const submitBtn=contactForm.querySelector('button[type=\"submit\"]');const originalText=submitBtn.textContent;submitBtn.textContent='Sending...';submitBtn.disabled=true;setTimeout(()=>{showNotification('Message sent successfully!','success');contactForm.reset();submitBtn.textContent=originalText;submitBtn.disabled=false},2000)})}const reviewForm=document.getElementById('review-form');if(reviewForm){reviewForm.addEventListener('submit',function(e){e.preventDefault();const formData=new FormData(reviewForm);const reviewData=Object.fromEntries(formData);addReview(reviewData);reviewForm.reset();showNotification('Review added successfully!','success')})}}function initializeReviews(){loadReviews()}function addReview(reviewData){const reviews=getReviews();const newReview={id:Date.now(),name:reviewData.name,rating:parseInt(reviewData.rating),comment:reviewData.comment,date:new Date().toLocaleDateString()};reviews.unshift(newReview);localStorage.setItem('calquro_reviews',JSON.stringify(reviews));displayReviews()}function getReviews(){return JSON.parse(localStorage.getItem('calquro_reviews')||'[]')}function displayReviews(){const reviewsContainer=document.getElementById('reviews-container');if(!reviewsContainer)return;const reviews=getReviews().slice(0,6);if(reviews.length===0){reviewsContainer.innerHTML='<p>No reviews yet. Be the first to leave a review!</p>';return}reviewsContainer.innerHTML=reviews.map(review=>`<div class=\"review-card\"><div class=\"review-rating\">${'★'.repeat(review.rating)}${'☆'.repeat(5-review.rating)}</div><p>\"${review.comment}\"</p><div style=\"margin-top: 1rem; font-weight: 600; color: var(--primary-color);\">- ${review.name}</div><div style=\"font-size: 0.9rem; color: var(--text-secondary);\">${review.date}</div></div>`).join('')}function loadReviews(){displayReviews()}function initializeChatbot(){const chatbotMessages=document.getElementById('chatbot-messages');const chatbotInput=document.getElementById('chatbot-input');const chatbotSend=document.getElementById('chatbot-send');if(!chatbotMessages||!chatbotInput||!chatbotSend)return;function addMessage(message,isUser=false){const messageDiv=document.createElement('div');messageDiv.className=`message ${isUser?'user':'bot'}`;messageDiv.textContent=message;chatbotMessages.appendChild(messageDiv);chatbotMessages.scrollTop=chatbotMessages.scrollHeight}function getBotResponse(userMessage){const responses={'hello':'Hello! How can I help you with calculations today?','help':'I can help you with various calculations. Try our calculators or ask me a specific question.','calculator':'We have many calculators available including BMI, Age, Percentage, and more!','default':'Thanks for your message! I\'m here to help with any calculation needs.'};const message=userMessage.toLowerCase();if(message.includes('hello')||message.includes('hi'))return responses.hello;if(message.includes('help'))return responses.help;if(message.includes('calculator')||message.includes('calculate'))return responses.calculator;return responses.default}chatbotSend.addEventListener('click',function(){const message=chatbotInput.value.trim();if(message){addMessage(message,true);chatbotInput.value='';setTimeout(()=>{const response=getBotResponse(message);addMessage(response)},1000)}});chatbotInput.addEventListener('keypress',function(e){if(e.key==='Enter'){chatbotSend.click()}});addMessage('Hello! I\'m your calculation assistant. How can I help you today?')}function showNotification(message,type='info'){const notification=document.createElement('div');notification.className=`notification ${type}`;notification.textContent=message;notification.style.cssText=`position:fixed;top:20px;right:20px;background:${type==='success'?'#10b981':'#3b82f6'};color:white;padding:1rem 2rem;border-radius:8px;z-index:10000;opacity:0;transform:translateX(100%);transition:all 0.3s ease`;document.body.appendChild(notification);setTimeout(()=>{notification.style.opacity='1';notification.style.transform='translateX(0)'},100);setTimeout(()=>{notification.style.opacity='0';notification.style.transform='translateX(100%)';setTimeout(()=>document.body.removeChild(notification),300)},3000)}function formatNumber(num){return num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,',')}function isValidEmail(email){const re=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;return re.test(email)}function copyToClipboard(text){navigator.clipboard.writeText(text).then(()=>{showNotification('Copied to clipboard!','success')}).catch(()=>{const textarea=document.createElement('textarea');textarea.value=text;document.body.appendChild(textarea);textarea.select();document.execCommand('copy');document.body.removeChild(textarea);showNotification('Copied to clipboard!','success')})}function debounce(func,wait){let timeout;return function executedFunction(...args){const later=()=>{clearTimeout(timeout);func(...args)};clearTimeout(timeout);timeout=setTimeout(later,wait)}}function throttle(func,limit){let inThrottle;return function(){const args=arguments;const context=this;if(!inThrottle){func.apply(context,args);inThrottle=true;setTimeout(()=>inThrottle=false,limit)}}}function initializeLazyLoading(){const lazyImages=document.querySelectorAll('img[data-src]');if('IntersectionObserver'in window){const imageObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;img.src=img.dataset.src;img.classList.remove('lazy-load');img.classList.add('loaded');img.removeAttribute('data-src');imageObserver.unobserve(img)}})},{rootMargin:'50px 0px',threshold:0.01});lazyImages.forEach(img=>{img.classList.add('lazy-load');imageObserver.observe(img)})}else{lazyImages.forEach(img=>{img.src=img.dataset.src;img.removeAttribute('data-src')})}}function preloadCriticalResources(){const criticalImages=['images/logo.jpg','images/developer.jpg'];criticalImages.forEach(src=>{const link=document.createElement('link');link.rel='preload';link.as='image';link.href=src;document.head.appendChild(link)})}window.CalquroUtils={showNotification,formatNumber,isValidEmail,copyToClipboard,debounce,throttle};